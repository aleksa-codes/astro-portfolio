---
import Layout from '@/layouts/layout.astro';
import Breadcrumb from '@/components/breadcrumb.astro';
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import Button from '@/components/ui/button.astro';
import Badge from '@/components/ui/badge.astro';
import UnYellowGPT from '@/assets/projects/unyellow-gpt.png';
import EasyWebsiteGPT from '@/assets/projects/easy-websitegpt.png';
import EasyWebsiteBlocker from '@/assets/projects/easy-website-blocker.png';
import OneDarkModernPro from '@/assets/projects/one-dark-modern-pro.png';
import GptImgCaptioner from '@/assets/projects/gpt-img-captioner.png';
import GptFileSmith from '@/assets/projects/gpt-filesmith.png';
import NextMeal from '@/assets/projects/next-meal.png';
import NextDay from '@/assets/projects/next-day.png';
import NextWorkout from '@/assets/projects/next-workout.png';
import FluxGhibsky from '@/assets/projects/flux-ghibsky.png';
import AleksaPortfolio from '@/assets/projects/aleksa.codes.png';
import { cn } from '@/lib/utils';

const categories = [
  { name: 'All', icon: 'lucide:layout-grid' },
  { name: 'Web Apps', icon: 'lucide:layout-dashboard' },
  { name: 'Websites', icon: 'lucide:panels-top-left' },
  { name: 'AI & Tools', icon: 'lucide:bot' },
  { name: 'Browser Extensions', icon: 'lucide:puzzle' },
];

const projects = [
  {
    title: 'UnYellowGPT',
    description:
      'SaaS solution that <span class="highlight">fixes yellow tint and sepia filters</span> in AI-generated images. Features <span class="highlight">advanced white balance correction</span> and true color restoration with lightning-fast processing for creative workflows.',
    tags: ['Next.js', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'Neon DB', 'DrizzleORM', 'Better Auth', 'SaaS'],
    image: UnYellowGPT,
    demo: 'https://unyellowgpt.com',
    featured: true,
    category: 'Web Apps',
  },
  {
    title: 'Next Day',
    description:
      'Full-stack productivity app that combines todo lists with integrated Pomodoro timers. Features <span class="highlight">seamless authentication and real-time syncing</span> with nested task organization.',
    tags: ['Next.js', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'Supabase', 'DrizzleORM', 'Better Auth'],
    image: NextDay,
    github: 'https://github.com/aleksa-codes/nextday-todo-app',
    demo: 'https://nextday.aleksa.codes',
    category: 'Web Apps',
  },

  {
    title: 'GPT Image Captioner',
    description:
      'Advanced tool for generating detailed image descriptions. Optimized for <span class="highlight">LoRA model training</span> with support for batch processing and customizable outputs.',
    tags: ['Next.js', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'OpenAI API'],
    image: GptImgCaptioner,
    github: 'https://github.com/aleksa-codes/gpt-flux-img-captioner',
    demo: 'https://gptcaptioner.aleksa.codes',
    category: 'AI & Tools',
  },
  {
    title: 'Easy WebsiteGPT',
    description:
      'Innovative Chrome extension for <span class="highlight">interactive conversations with any webpage</span>. Features real-time streaming responses and persistent chat history.',
    tags: ['React', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'OpenAI API', 'Chrome API'],
    image: EasyWebsiteGPT,
    github: 'https://github.com/aleksa-codes/easy-website-gpt',
    status: 'coming-soon',
    category: 'Browser Extensions',
  },
  {
    title: 'Next Workout',
    description:
      'Modern fitness app with <span class="highlight">AI-generated workout plans and built-in timers</span>. Features customizable parameters, circuit/straight set options, and embedded video demonstrations for effective home workouts.',
    tags: ['Next.js', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'ChatGPT', 'localStorage'],
    image: NextWorkout,
    github: 'https://github.com/aleksa-codes/next-workout',
    demo: 'https://nextworkout.aleksa.codes',
    category: 'AI & Tools',
  },
  {
    title: 'GPT FileSmith',
    description:
      'Creative content generator inspired by Rick and Morty\'s multiverse concept. <span class="highlight">Creates unique, imaginative content</span> with instant preview and download options.',
    tags: ['Astro', 'TailwindCSS', 'OpenAI API'],
    image: GptFileSmith,
    github: 'https://github.com/aleksa-codes/gpt-filesmith',
    demo: 'https://filesmith.aleksa.codes',
    category: 'AI & Tools',
  },
  {
    title: 'Easy Website Blocker',
    description:
      'Powerful productivity extension for <span class="highlight">eliminating digital distractions</span>. Features customizable block lists and granular exceptions for focused work sessions.',
    tags: ['React', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'Chrome API'],
    image: EasyWebsiteBlocker,
    github: 'https://github.com/aleksa-codes/easy-website-blocker',
    status: 'coming-soon',
    category: 'Browser Extensions',
  },
  {
    title: 'One Dark Modern Pro',
    description:
      'Sleek and modern VS Code theme inspired by Atom\'s One Dark Pro. Features <span class="highlight">vibrant syntax highlighting and modern UI design</span>.',
    tags: ['VS Code', 'Theme', 'JSON'],
    image: OneDarkModernPro,
    github: 'https://github.com/aleksa-codes/one-dark-modern-pro',
    demo: 'https://marketplace.visualstudio.com/items?itemName=aleksa-codes.one-dark-modern-pro',
    category: 'AI & Tools',
  },
  {
    title: 'Flux Ghibsky Illustration',
    description:
      'Popular Flux AI LoRA model for <span class="highlight">generating Ghibli-inspired landscapes and scenes</span>. Garnering over <span class="highlight">30,000 monthly generations</span> across Hugging Face and Replicate.',
    tags: ['AI', 'LoRA', 'Stable Diffusion', 'Text-to-Image'],
    image: FluxGhibsky,
    huggingface: 'https://huggingface.co/aleksa-codes/flux-ghibsky-illustration',
    replicate: 'https://replicate.com/aleksa-codes/flux-ghibsky-illustration',
    category: 'AI & Tools',
  },
  {
    title: 'aleksa.codes',
    description:
      'My personal portfolio and blog, built with Astro for <span class="highlight">peak performance and SEO</span>. Features a blog managed with Decap CMS and an <span class="highlight">AI assistant</span> that helps visitors find information quickly.',
    tags: ['Astro', 'TypeScript', 'TailwindCSS', 'SEO', 'Decap CMS', 'AI'],
    image: AleksaPortfolio,
    demo: 'https://aleksa.codes',
    github: 'https://github.com/aleksa-codes/astro-portfolio',
    featured: true,
    category: 'Websites',
  },
  {
    title: 'Next Meal',
    description:
      'Intuitive recipe discovery app with <span class="highlight">instant meal suggestions and video tutorials</span>. Perfect for when you need quick meal ideas.',
    tags: ['Next.js', 'TypeScript', 'TailwindCSS', 'shadcn/ui', 'TheMealDB API', 'PWA'],
    image: NextMeal,
    github: 'https://github.com/aleksa-codes/my-next-meal-pwa',
    demo: 'https://nextmeal.aleksa.codes',
    category: 'Web Apps',
  },
];
---

<Layout
  title='Projects'
  description='Explore my collection of web applications, AI-powered tools, and browser extensions. From productivity apps to creative solutions, see how I bring ideas to life with modern web technologies.'
>
  <div class='container space-y-6'>
    <Breadcrumb />
    <header class='space-y-6'>
      <h1 class='text-4xl font-extrabold tracking-tight lg:text-5xl'>Projects</h1>
      <p class='text-base-content max-w-[750px] text-lg leading-relaxed'>
        As a developer who loves exploring new technologies, these projects represent my journey of continuous learning
        and innovation. From Websites to AI-powered tools, each project is crafted with <span class='highlight'
          >passion for clean code</span
        > and <span class='highlight'>exceptional user experience</span>.
      </p>

      <div id='project-filters' aria-label='Project categories'>
        <ul class='flex flex-wrap gap-4 pt-2'>
          {
            categories.map((category) => (
              <li>
                <button
                  data-category={category.name}
                  class='filter-btn flex items-center gap-2 rounded-full border px-4 py-1.5 text-sm font-medium hover:cursor-pointer'
                  aria-pressed='false'
                >
                  <Icon name={category.icon} class='size-4' />
                  <span>{category.name}</span>
                </button>
              </li>
            ))
          }
        </ul>
      </div>
    </header>

    <section id='project-list' aria-label='Project list' class='space-y-12'>
      {
        projects
          .sort((a, b) => (a.featured === b.featured ? 0 : a.featured ? -1 : 1))
          .map((project, index) => (
            <article
              data-category={project.category}
              class={cn(
                'project-card relative flex flex-col gap-12 md:flex-row',
                index % 2 === 1 && 'md:flex-row-reverse',
              )}
            >
              <div class='relative w-full lg:w-1/2'>
                <div class='border-base-300 bg-base-200 relative flex aspect-square items-center justify-center overflow-hidden rounded-2xl border text-lg font-medium'>
                  {project.image ? (
                    <Image
                      src={project.image}
                      alt={`Screenshot of ${project.title}`}
                      loading={index < 3 ? 'eager' : 'lazy'}
                      format='webp'
                      quality='max'
                      class='h-full w-full object-cover object-top'
                    />
                  ) : (
                    <span class='text-base-content/50'>Image Coming Soon</span>
                  )}
                </div>
              </div>
              <div class='flex w-full flex-col justify-center space-y-6 lg:w-1/2'>
                <div class='space-y-4'>
                  <div class='flex items-center gap-4'>
                    <h2
                      class={cn(
                        'from-secondary to-base-content bg-gradient-to-r bg-clip-text text-3xl font-bold tracking-tight text-transparent',
                        project.featured && 'to-warning',
                      )}
                    >
                      {project.title}
                    </h2>
                    {project.featured && (
                      <Badge variant='warning' icon='lucide:star'>
                        Featured
                      </Badge>
                    )}
                  </div>
                  <p class='text-base-content text-lg leading-relaxed' set:html={project.description} />
                </div>

                <div role='list' aria-label={`Technologies used in ${project.title}`} class='flex flex-wrap gap-2'>
                  {project.tags.map((tag) => (
                    <div role='listitem'>
                      <Badge>{tag}</Badge>
                    </div>
                  ))}
                </div>

                <div class='flex gap-4 pt-2'>
                  {project.status === 'coming-soon' ? (
                    <Button variant='secondary' loading>
                      <span>Soon</span>
                    </Button>
                  ) : project.huggingface ? (
                    <div class='flex flex-wrap gap-4'>
                      <Button variant='secondary' href={project.huggingface} target='_blank' rel='noopener noreferrer'>
                        <Icon name='simple-icons:huggingface' class='size-4' aria-hidden='true' />
                        <span>Hugging Face</span>
                      </Button>
                      <Button variant='secondary' href={project.replicate} target='_blank' rel='noopener noreferrer'>
                        <Icon name='simple-icons:replicate' class='size-4' aria-hidden='true' />
                        <span>Replicate</span>
                      </Button>
                    </div>
                  ) : (
                    project.demo && (
                      <Button variant='secondary' href={project.demo} target='_blank' rel='noopener noreferrer'>
                        <Icon name='lucide:external-link' class='size-4' aria-hidden='true' />
                        <span>Live Demo</span>
                      </Button>
                    )
                  )}
                  {project.github && (
                    <Button variant='outline' href={project.github} target='_blank' rel='noopener noreferrer'>
                      <Icon name='lucide:github' class='size-4' aria-hidden='true' />
                      <span>Code</span>
                    </Button>
                  )}
                </div>
              </div>
            </article>
          ))
      }
    </section>

    <div class='flex justify-center pt-16'>
      <Button
        href='https://github.com/aleksa-codes'
        size='lg'
        target='_blank'
        rel='noopener noreferrer'
        variant='outline'
      >
        <Icon name='lucide:github' class='size-5' aria-hidden='true' />
        <span>More on GitHub</span>
      </Button>
    </div>
  </div>
</Layout>

<script>
  const filterButtons = document.querySelectorAll('#project-filters .filter-btn');
  const projectCards = document.querySelectorAll('#project-list .project-card');

  const activeClasses = ['bg-secondary', 'text-secondary-content', 'border-secondary', 'shadow-lg'];
  const inactiveClasses = [
    'bg-transparent',
    'text-base-content/70',
    'border-base-300',
    'hover:bg-base-200',
    'hover:text-base-content',
  ];

  function updateAlternatingLayout() {
    const visibleCards = document.querySelectorAll('.project-card:not(.hidden)');
    visibleCards.forEach((card, index) => {
      const cardEl = card as HTMLElement;
      cardEl.classList.remove('md:flex-row', 'md:flex-row-reverse');
      if (index % 2 === 1) {
        cardEl.classList.add('md:flex-row-reverse');
      } else {
        cardEl.classList.add('md:flex-row');
      }
    });
  }

  function applyFilter(selectedButton: Element) {
    const category = (selectedButton as HTMLElement).dataset.category;

    filterButtons.forEach((btn) => {
      const button = btn as HTMLElement;
      button.classList.remove(...activeClasses);
      button.classList.add(...inactiveClasses);
      button.setAttribute('aria-pressed', 'false');
    });

    selectedButton.classList.remove(...inactiveClasses);
    selectedButton.classList.add(...activeClasses);
    selectedButton.setAttribute('aria-pressed', 'true');

    projectCards.forEach((card) => {
      const cardEl = card as HTMLElement;
      const cardCategory = cardEl.dataset.category;

      if (category === 'All' || cardCategory === category) {
        cardEl.classList.remove('hidden');
      } else {
        cardEl.classList.add('hidden');
      }
    });

    updateAlternatingLayout();
  }

  filterButtons.forEach((button) => {
    button.addEventListener('click', () => applyFilter(button));
  });

  if (filterButtons.length > 0) {
    applyFilter(filterButtons[0]);
  }
</script>
